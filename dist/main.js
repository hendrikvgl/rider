(()=>{"use strict";let e=!1;document.getElementById("pauseButton").onclick=()=>{e=!e};var t=document.getElementById("myCanvas").getContext("2d");const a=600,n=800,o=document.getElementById("wastedOverlay"),r=document.getElementById("playAgainText"),c=document.getElementById("angle"),l=document.getElementById("acc"),y=document.getElementById("points"),d=document.getElementById("finalPoints");let x=[],h=0,s={};const g={faster:!1,slower:!1,left:!1,right:!1};let i=[];const w=()=>{e=!1,i=[{x:1,y:1,h:100,w:50,dx:.4,dy:.8,color:"red"},{x:580,y:20,h:50,w:50,dx:.6,dy:.4,color:"red"},{x:700,y:200,h:70,w:90,dx:-.1,dy:-.1,color:"red"},{x:400,y:400,h:50,w:50,dx:1,dy:-1,color:"red"},{x:500,y:100,h:30,w:150,dx:.8,dy:-.6,color:"red"},{x:150,y:400,h:80,w:20,dx:-.9,dy:.3,color:"red"},{x:650,y:500,h:50,w:50,dx:1,dy:-.95,color:"red"}],s={x:400,y:300,r:15,angle:0,acc:0},h=0,x=[]},f=()=>{w(),o.style.display="none",e=!1};r.onclick=f,document.addEventListener("keydown",(({code:e})=>{console.log(e),"KeyW"!==e&&"ArrowUp"!==e||(g.faster=!0),"KeyS"!==e&&"ArrowDown"!==e||(g.slower=!0),"KeyA"!==e&&"ArrowLeft"!==e||(g.left=!0),"KeyD"!==e&&"ArrowRight"!==e||(g.right=!0),"Space"===e&&f()})),document.addEventListener("keyup",(({code:e})=>{"KeyW"!==e&&"ArrowUp"!==e||(g.faster=!1),"KeyS"!==e&&"ArrowDown"!==e||(g.slower=!1),"KeyA"!==e&&"ArrowLeft"!==e||(g.left=!1),"KeyD"!==e&&"ArrowRight"!==e||(g.right=!1)}));const u=(e,t)=>{var a=Math.abs(e.x-t.x-t.w/2),n=Math.abs(e.y-t.y-t.h/2);if(a>t.w/2+e.r)return!1;if(n>t.h/2+e.r)return!1;if(a<=t.w/2)return!0;if(n<=t.h/2)return!0;var o=a-t.w/2,r=n-t.h/2;return o*o+r*r<=e.r*e.r},m=(e,a,n,o,r)=>{t.beginPath(),t.rect(Math.round(e),Math.round(a),n,o),t.fillStyle=r,t.fill(),t.closePath()};function M(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}w(),setInterval((()=>{if(x.length<3){const e={x:M(10,790),y:M(10,590),w:10,h:10};x.push(e)}}),3e3),setInterval((()=>{e||(t.clearRect(0,0,n,a),x.forEach(((e,t)=>{u(s,e)&&(x.splice(t,1),h+=100)})),i.some((e=>u(s,e)))&&(o.style.display="block",e=!0),(()=>{const e={angle:s.angle,acc:s.acc};g.faster?e.acc=e.acc+.1:e.acc=e.acc-.01,g.slower&&(e.acc=e.acc-.05),g.left&&(e.angle=s.angle-1.5),g.right&&(e.angle=s.angle+1.5),e.angle>360&&(e.angle=e.angle-360),e.angle<0&&(e.angle=e.angle+360),e.acc<=0&&(e.acc=0),e.acc>=3&&(e.acc=3),s.angle=e.angle,s.acc=e.acc})(),(()=>{const e={x:s.x,y:s.y},t=s.acc*Math.sin(2*Math.PI*s.angle/360),o=s.acc*Math.cos(2*Math.PI*s.angle/360);e.x=s.x+t,e.y=s.y-o,e.x-s.r<0&&(e.x=0+s.r),e.x+s.r>n&&(e.x=n-s.r),e.y-s.r<0&&(e.y=0+s.r),e.y+s.r>a&&(e.y=a-s.r),s.x=e.x,s.y=e.y})(),(()=>{(()=>{const e=i.map(((e,t)=>{const o=[...i];delete o[t];const r={...e};let c=!1;return(r.x+r.w>=n||r.x<=0)&&(r.dx=-r.dx,c=!0),(r.y+r.h>=a||r.y<=0)&&(r.dy=-r.dy,c=!0),c||(o.forEach((e=>{r.x+r.w>=e.x&&r.x<=e.x+e.w&&Math.abs(r.y-(e.y+e.h))<=1&&(r.dy=e.dy)})),o.forEach((e=>{r.x+r.w>=e.x&&r.x<=e.x+e.w&&Math.abs(r.y+r.h-e.y)<=1&&(r.dy=e.dy)})),o.forEach((e=>{r.y+r.h>=e.y&&r.y<=e.y+e.h&&Math.abs(r.x+r.w-e.x)<=1&&(r.dx=e.dx)})),o.some((e=>{r.y+r.h>=e.y&&r.y<=e.y+e.h&&Math.abs(r.x-(e.x+e.w))<=1&&(r.dx=e.dx)}))),r}));i=e})();const e=i.map((e=>({...e,x:e.x+e.dx,y:e.y+e.dy})));i=e})(),h-=.01,((e,a,n,o,r)=>{t.beginPath(),t.arc(e,a,n,0,2*Math.PI,!1),t.fillStyle=r,t.fill(),t.closePath(),t.beginPath(),t.strokeStyle="white",t.moveTo(e,a);const c=n*Math.sin(2*Math.PI*o/360),l=n*Math.cos(2*Math.PI*o/360);t.lineTo(e+c,a-l),t.stroke()})(s.x,s.y,s.r,s.angle,"blue"),x.forEach((e=>{m(e.x,e.y,e.w,e.h,"orange")})),i.forEach((e=>{m(e.x,e.y,e.w,e.h,e.color)})),c.textContent=s.angle+" degrees",l.textContent=s.acc.toFixed(2)+" speed",d.textContent=h.toFixed(0),y.textContent=h.toFixed(0))}),10)})();